<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      >


    <h:head> <!-- enforce UTF 8. also, header is needed for primefaces to work  -->
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </h:head>



    <body>

        <ui:composition template="/templates/navbar1Layout.xhtml">



            <!-- highlight "preferences" tab -->
            <ui:param name="jrtabindex" value="#{jrtab.jorideTabindexRider}" />


            <ui:define name="windowTitle">
                #{msgs.title}
            </ui:define>

            <ui:define name="content">


                <!-- subnavigation section -->
                <p>
                    <div id="navbar2">

                        <h:form>
                            <span class="nav2Highlight">
                                <h:commandLink action="rider.previousRequests">   #{msgs.ridePreviousRequests}     </h:commandLink>    
                            </span> 
                            |
                            <span class="nav2Highlight">
                                <h:commandLink action="rider.rideCreate"   value="#{msgs.rideNewRequest}">  
                                    <f:param name="#{webflow.paramBack}"    value="rider" /> 
                                    <f:param name="#{webflow.paramFinish}"  value="rider" /> 
                                    <f:param name="#{webflow.paramCancel}"  value="rider" /> 
                                </h:commandLink>
                            </span>

                        </h:form>

                    </div>
                </p>

                <!--  end of subnavigation section -->

                
                
                <!-- update parameters on load! -->
                #{timeinterval.smartUpdate()}
                
                <!--  form to fire up request -->

                <h:form>
                    <p:panel header="#{msgs.ridePreviousRequests}"  >

                        <p:panelGrid columns="2">

                            <p:outputLabel value="TODO: Length of time period in days" />

                            <p:selectOneMenu value="#{timeinterval.days}" size="1" >
                                <f:selectItem itemValue="1"  itemLabel="1"    />      
                                <f:selectItem itemValue="5"  itemLabel="5"    />
                                <f:selectItem itemValue="10" itemLabel="10"   />
                                <f:selectItem itemValue="15" itemLabel="15"   />
                                <f:selectItem itemValue="30" itemLabel="30"   />
                                <f:selectItem itemValue="60" itemLabel="60"   />
                                <f:selectItem itemValue="90" itemLabel="90"   />
                                <f:selectItem itemValue="120" itemLabel="120" />
                            </p:selectOneMenu>


                            <p:outputLabel value="TODO: Search period ends at:" /> 

                            <p:calendar 
                                value="#{timeinterval.endDate}"  
                                id="licensedateCal"   
                                locale="de" 
                                pattern="#{timeinterval.dateformat}" 
                                mode="popup"
                                navigator="true"
                                showOn="button"
                                size="10"
                                >  
                            </p:calendar>

                        </p:panelGrid>

                        <h:commandButton  
                            value="TODO: search Rides for Interval"
                            action="rider.previousRequests"
                            >

                            <f:param 
                                name="#{timeinterval.paramDays}" 
                                value="#{timeinterval.days}"
                                />
                            
                             <f:param 
                                 name="#{timeinterval.paramEndDate}" 
                                 value="#{timeinterval.endDateFormatted}"
                                />
                            
                        </h:commandButton>


                    </p:panel>

                </h:form>

                <!-- Result Section -->



                <h:form>
                    <p:dataTable 
                        value="#{ride.ridesForRider}" 
                        var="ride" 
                        paginator="true" 
                        rows="1" 
                        >

                        <p:column> 
                            <f:facet name="header">

                            </f:facet>

                            <span class="formLabel">
                                <p>
                                    <p:outputLabel value="#{ride.startDateFormatted}" />
                                </p>

                                <p>
                                    <p:outputLabel value="TODO: given" />     
                                </p>
                                <p>
                                    <h:outputLabel value="TODO: received" />    
                                </p>
                            </span>

                        </p:column>

                        <p:column> 
                            <f:facet name="header">

                            </f:facet>
                            <p>
                                <p:outputLabel value="#{ride.endptAddress}" />
                            </p>
                            <p> 
                                <p:commandLink value="TODO rate" />
                            </p>
                            <p>
                                <h:commandLink action="rider.rideDisplay" value="#{msgs.rideDisplayRequest}">
                                    <f:param  name="#{crud.paramNameCrudId}" value="#{ride.riderrouteId}"/>
                                    <f:param name="#{webflow.getParamBack()}" value="rider.previousRequests" />
                                </h:commandLink>
                            </p>


                        </p:column>





                    </p:dataTable>
                </h:form>










            </ui:define>




        </ui:composition>





    </body>
</html>
