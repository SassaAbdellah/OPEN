<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      >


    <h:head> <!-- enforce UTF 8. also, header is needed for primefaces to work  -->
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </h:head>


    <body>


        <ui:composition template="/templates/navbar1Layout.xhtml">


            <!-- highlight "preferences" tab -->
            <ui:param name="jrtabindex" value="#{jrtab.jorideTabindexDriver}" />



            <ui:define name="windowTitle">
                #{msgs.title}
            </ui:define>


            <ui:define name="content">

                <h:form> <!-- have a single form enclose the whole content area -->

                    #{waypoint.smartUpdate()}


                    <h1> #{msgs.createWaypoint} </h1>


                    <table>



                        <tr> 
                            <td class="formLabel"> TODO: rideId </td>
                            <td class="formLabel"> : </td>
                            <td class="formInput"> #{waypoint.rideId} </td>
                        </tr>
                        <tr> 
                            <td class="formLabel"> TODO: position </td>
                            <td class="formLabel"> : </td>
                            <td class="formInput"> #{waypoint.position} </td>
                        </tr>
                        <tr> 
                            <td class="formLabel"> TODO: route Index </td>
                            <td class="formLabel"> : </td>
                            <td class="formInput"> #{waypoint.routeIdx} </td>
                        </tr>

                        <tr> 
                            <td class="formLabel"> TODO: description </td>
                            <td class="formLabel"> : </td>
                            <td class="formInput"> #{waypoint.description} </td>
                        </tr>

                        <tr> 
                            <td class="formLabel"> TODO: lon </td>
                            <td class="formLabel"> : </td>
                            <td class="formInput"> #{waypoint.longitude} </td>
                        </tr>

                        <tr> 
                            <td class="formLabel"> TODO: lat </td>
                            <td class="formLabel"> : </td>
                            <td class="formInput"> #{waypoint.latitude} </td>
                        </tr>
                        
                       <tr> 
                            <td class="formLabel"> TODO: isLocationSet </td>
                            <td class="formLabel"> : </td>
                            <td class="formInput"> #{waypoint.locationSet} </td>
                        </tr>
                        
                        <tr> 
                            <td class="formLabel"> TODO: rideAttached </td>
                            <td class="formLabel"> : </td>
                            <td class="formInput"> #{waypoint.rideAttached} </td>
                        </tr>
                        
                           <tr> 
                            <td class="formLabel"> TODO: ready for persisting </td>
                            <td class="formLabel"> : </td>
                            <td class="formInput"> #{waypoint.readyForPersisting} </td>
                        </tr>
                        
                        

                        <tr>
                            <td class="formInput" colspan="3">

                                <h:commandLink value="#{msgs.geolocationSelectPlace}" action="pickpoint">


                                    <!-- point parameters -->
                                    <f:param name="#{point.paramTargetURL}" value="#{HTTPUser.URLBase}/faces/protected/driver/waypointCreate.xhtml"/>
                                    <!-- set the target parameters, so we know which point to update -->
                                    <f:param name="#{point.paramTarget}"    value="#{newdriverride.paramValueTargetEndpoint}"/>

                                    <!-- webflow parameters -->

                                    <f:param name="#{webflow.paramBack}"    value="driver.createWaypoint" /> 
                                    <f:param name="#{webflow.paramFinish}"  value="driver.createWaypoint" /> 
                                    <f:param name="#{webflow.paramCancel}"  value="driver.createWaypoint" /> 


                                </h:commandLink>


                            </td>


                        </tr>


                        <tr>
                            <td class="formInput" colspan="3">

                                Waypoint ausw√§hlen

                                TODO: currently getting back from pickpoint to drive display 
                                does not work, as drive display will update drive with given
                                rideId parameter.
                                Way out: do not update driveDisplay if rideId parameter is null
                            </td>
                        </tr>


                        <tr> <!--  -->
                            <td class="formInput" colspan="3">
                                
                                #{webflow.smartUpdate()}

                                <h:commandLink value="#{msgs.back}" action="#{webflow.getBack()}">
                                    <f:param  name="#{crud.paramNameCrudId}"   value="#{waypoint.rideId}"/>
                                </h:commandLink>

                            </td> 
                        </tr>
                    </table>

                </h:form>

            </ui:define>




        </ui:composition>





    </body>
</html>
