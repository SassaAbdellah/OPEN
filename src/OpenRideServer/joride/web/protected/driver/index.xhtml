<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"  >

    <body>


        <ui:composition template="/templates/navbar1Layout.xhtml">

            <!-- set "classDriver" property to highlight, so that home tab will be higlighted -->
            <ui:param name="classDriver" value="Highlight" />

            <ui:define name="windowTitle">
                #{msgs.title}
            </ui:define>


            <ui:define name="content">


                <div id="navbar2">

                    <h:form>

                        <span class="nav2Highlight">
                            <h:commandLink action="preferences.driverPreferences">   #{msgs.nav1_pref_driverPreferences_label}     </h:commandLink>    
                        </span> 

                        |

                        <span class="nav2Highlight">
                            <h:commandLink action="driver.driveCreate"   value="#{msgs.rideNewDrive}">  

                                <f:param name="#{webflow.paramBack}"    value="driver" /> 
                                <f:param name="#{webflow.paramFinish}"  value="driver" /> 
                                <f:param name="#{webflow.paramCancel}"  value="driver" /> 
                            </h:commandLink>
                        </span>


                    </h:form>

                </div>

                <h1> #{msgs.driversSection} </h1>


                <h2> #{msgs.rideActiveOffers} : </h2>

                <h:form>

                    <!-- Datatable displaying future offers for this driver -->


                    <h:dataTable 
                        value="#{driverride.futureDrives}" 
                        styleClass="table" 
                        headerClass="tableheader"
                        var="drive" 
                        >



                        <h:column>   <!-- we use single column and nested table to display rides -->        

                            <tr>
                                <p>
                                    <table> <!-- nested three column table -->

                                        <tr>
                                            <td colspan="3">
                                                <h3> #{msgs.rideOffer} #{drive.rideId} </h3>
                                                <!-- show message if ride is updated -->
                                                <ui:fragment rendered="#{drive.driveUpdated}">
                                                    <h:graphicImage library="images" name="updated.gif" width="20" height="20" />
                                                    #{msgs.updatedDrive}
                                                </ui:fragment>
                                            </td>
                                        </tr>

                                           <tr>
                                            <td colspan="3">
                                                <span class="formLabel">
                                                    <h:commandLink action="driver.driveDisplay" value="#{msgs.formDisplay}">
                                                        <f:param  name="#{crud.paramNameCrudId}" value="#{drive.rideId}"/>
                                                        <f:param name="#{webflow.getParamBack()}" value="driver"          />
                                                    </h:commandLink>
                                                </span>
                                            </td>
                                        </tr>

                                        
                                        <tr>                                            
                                            <td>
                                                <span class="formLabel">
                                                    #{msgs.rideStarttime}
                                                </span>
                                            </td>
                                            <td class="formLabel"> &nbsp;:&nbsp; </td>
                                            <td>
                                                <span class="formInput">
                                                    #{drive.startDateFormatted} 
                                                </span>
                                            </td>
                                        </tr>

                                     
                                        <tr>
                                            <td class="formLabel">  #{msgs.rideStart}  </td>
                                            <td class="formLabel"> &nbsp;:&nbsp; </td>
                                            <td class="formInput"> #{drive.startptAddress} </td>
                                        </tr>
                                        <tr>
                                            <td class="formLabel">   #{msgs.rideDestination}  </td>
                                            <td class="formLabel"> &nbsp;:&nbsp; </td>
                                            <td class="formInput"> #{drive.endptAddress} </td>
                                        </tr>

                                        <tr>
                                            <td> <span class="formLabel">  #{msgs.rideComment} </span> </td>
                                            <td> <span class="formLabel"> &nbsp;:&nbsp;                 </span> </td>
                                            <td>  <span class="formInput">  #{drive.rideComment}            </span> </td>
                                        </tr>

                                        <tr>
                                            <td> <span class="formLabel">  #{msgs.rideNoMatchingRequests} </span> </td>
                                            <td> <span class="formLabel"> &nbsp;:&nbsp;                 </span> </td>
                                            <td> <span class="formInput">  #{drive.noMatches}            </span> </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <span class="formLabel">
                                                    <h:commandLink action="driver.driveMatchingsList" value="#{msgs.rideMatchesShowRequests}">
                                                        <f:param   name="#{crud.paramNameCrudId}"   value="#{drive.rideId}"/>
                                                        <f:param   name="#{webflow.getParamBack()}" value="driver"              />
                                                    </h:commandLink>
                                                </span>
                                            </td>
                                        </tr>
                                    </table>
                                </p>
                            </tr>

                        </h:column>



                    </h:dataTable>
                </h:form>  








                Driver's section...
            </ui:define>




        </ui:composition>

        <ui:debug />


    </body>
</html>
